# AMM MATH

## Constant Product AMM

* [https://www.youtube.com/watch?v=QNPyFs8Wybk](https://www.youtube.com/watch?v=QNPyFs8Wybk)
* If you have absolutely no background on this topic, the above video would be useful to set the stage.
* Else for quick reference:

<figure><img src="../.gitbook/assets/image (284).png" alt=""><figcaption></figcaption></figure>

### Swap - How many tokens to return in a trade?

<figure><img src="../.gitbook/assets/image (285).png" alt=""><figcaption></figcaption></figure>

* The trick is to identify if we are calculating for the increasing or decreasing asset
* In the wild reference; buyQuote, sellQuote: [https://github.com/code-423n4/2023-04-caviar/blob/main/src/PrivatePool.sol#L699](https://github.com/code-423n4/2023-04-caviar/blob/main/src/PrivatePool.sol#L699)
